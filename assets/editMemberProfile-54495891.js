import{u as i,b as d,a as u,m as g,S as l}from"./main-552c3467.js";import"./header-4e9731a3.js";i||(location.href="index.html");let r,s,o;const p=document.querySelector(".jsAvatarWrap"),y=document.querySelector(".jsRankWrap"),h=document.querySelector(".jsPositionWrap"),A=document.querySelector("#editMemberAccount");document.querySelector("#changeMemberPassword");document.querySelector("#checkMemberPassword");const m=document.querySelector("#editMemberName"),v=document.querySelector(".avatarMd"),c=document.querySelector("select"),b=document.querySelector("#editMemberHero"),k=document.querySelector(".jsChangeInfoBtn");d.get(`${u}/600/users/${g}`,{headers:{Authorization:`Bearer ${i}`}}).then(t=>{A.value=t.data.email,m.value=t.data.username,v.src=`../assets/images/avatar/${t.data.avatar}.png`,r=document.querySelector(`[data-avatar='${t.data.avatar}']`),r.classList.add("avatarActive"),r=r.getAttribute("data-avatar"),s=document.querySelector(`[data-rank='${t.data.userRank}']`),s.classList.remove("bg-opacity-20"),s=s.getAttribute("data-rank"),o=document.querySelector(`[data-position='${t.data.likePosition}']`),o.classList.remove("bg-opacity-20"),o=o.getAttribute("data-position"),c.value=t.data.likeHero,b.style=`background-image: url(../assets/images/champion/${t.data.likeHero}.jpg)`}).catch(t=>{console.log(t)});p.addEventListener("click",t=>{const e=document.querySelectorAll("img");t.target.getAttribute("class")==="avatarSmall pointer"&&(e.forEach(a=>{a.classList[2]==="avatarActive"&&a.classList.remove("avatarActive")}),r=t.target.getAttribute("data-avatar"),t.target.classList.add("avatarActive"),v.src=`../assets/images/avatar/${r}.png`)});y.addEventListener("click",t=>{const e=document.querySelectorAll("[data-rank]");t.target.getAttribute("class")==="badge bg-white text-dark fs-6 pointer bg-opacity-20"&&(e.forEach(a=>{a.classList[5]!=="bg-opacity-20"&&a.classList.add("bg-opacity-20")}),s=t.target.getAttribute("data-rank"),t.target.classList.remove("bg-opacity-20"))});h.addEventListener("click",t=>{const e=document.querySelectorAll("[data-position]");t.target.getAttribute("class")==="badge bg-white text-dark fs-6 pointer bg-opacity-20"&&(e.forEach(a=>{a.classList[5]!=="bg-opacity-20"&&a.classList.add("bg-opacity-20")}),o=t.target.getAttribute("data-position"),t.target.classList.remove("bg-opacity-20"))});c.addEventListener("change",t=>{b.style=`background-image: url(../assets/images/champion/${c.value}.jpg)`});k.addEventListener("click",t=>{t.preventDefault(),d.patch(`${u}/600/users/${g}`,{username:m.value,avatar:r,userRank:s,likePosition:o,likeHero:c.value},{headers:{Authorization:`Bearer ${i}`}}).then(e=>{localStorage.setItem("userAvatar",r),l.fire({icon:"success",title:"修改成功",showConfirmButton:!1,timer:2e3,background:"#060818",color:"#D6EEFF"}),setTimeout(()=>{location.href="memberCenter.html"},2e3)}).catch(e=>{l.fire({icon:"error",title:e.response.data,showConfirmButton:!1,timer:2500,background:"#060818",color:"#D6EEFF"})})});
